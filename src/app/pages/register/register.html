<div class="container d-flex justify-content-center align-items-center h-100 min-vh-100">
    <div class="col-12 col-sm-10 col-md-8 col-lg-6">
        <div class="card p-4 shadow border-0 w-100">
            <h1 class="text-center fw-bold mb-4 text-success">Crear Cuenta</h1>
                <form #registerForm="ngForm" (ngSubmit)="register(registerForm)">
                    <div class="mb-3">
                        <label for="restaurantName" class="form-label fw-semibold">Nombre del restaurante</label>
                        <input id="restaurantName" name="restaurantName" type="text" ngModel required restaurantName #restaurantName="ngModel" autocomplete="restaurantName" class="form-control">
            
                        @if (restaurantName.dirty || restaurantName.touched) {
                                @if (restaurantName.errors?.['required']) {
                                    <div class="invalid-feedback d-block">El nombre del Restaurante es obligatorio.</div>
                                }
                            }
                    </div>

                    <div class="row">
                        <div class="col-12 col-md-6 mb-3">
                            <label for="firstName" class="form-label fw-semibold">Nombre</label>
                            <input id="firstName" name="firstName" type="text" ngModel required firstName #firstName="ngModel" autocomplete="firstName" class="form-control" >
                            
                        </div>
            
                        <div class="col-12 col-md-6 mb-3">
                            <label for="lastName" class="form-label fw-semibold">Apellido</label>
                            <input id="lastName" name="lastName" type="text" ngModel required lastName #lastName="ngModel" autocomplete="lastName" class="form-control" >
                            
                        </div>
                    </div>

                    <div class="mb-3">
                            <label for="password" class="form-label fw-semibold">Contraseña</label>
                            <input id="password" name="password" type="password" ngModel required minlength="4" #password="ngModel" autocomplete="new-password" class="form-control">
                        @if (password.invalid && !password.pristine) {
                                @if (password.errors?.['required']) {
                                <div class="invalid-feedback d-block">La contraseña es obligatoria.</div>
                                }
                                @if (password.errors?.['minlength']) {
                                <div class="invalid-feedback d-block">Debe tener al menos 4 caracteres.</div>
                                }
                        }
                    </div>

                    <div class="mb-3">
                        <label for="password2" class="form-label fw-semibold">Repita la contraseña</label>
                        <input id="password2" name="password2" type="password" ngModel required #password2="ngModel" autocomplete="new-password" class="form-control">
                        
                        @if (password2.invalid && !password2.pristine) {
                            @if (password2.errors?.['required']) {
                            <div class="invalid-feedback d-block">Debes repetir la contraseña.</div>
                            }
                        }
                        @if (!password2.pristine && password.value !== password2.value && !password2.errors?.['required']) {
                            <div class="invalid-feedback d-block">Las contraseñas no coinciden.</div>
                        }
                    </div>

                    <div class="mb-3">
                        <label for="address" class="form-label fw-semibold">Dirección</label>
                        <input id="address" name="address" type="text" ngModel required address #address="ngModel" autocomplete="address" class="form-control" placeholder="Calle, número, ciudad"
                           [class.is-invalid]="address.invalid && (address.dirty || address.touched)">

                           @if (address.invalid && (address.dirty || address.touched)) {
                        <div class="invalid-feedback d-block">La dirección es obligatoria.</div>
                        }
                    </div>

                    <div class="mb-4">
                        <label for="phoneNumber" class="form-label fw-semibold">Numero de teléfono</label>
                        <input id="phoneNumber" name="phoneNumber" type="text" ngModel required phoneNumber #phoneNumber="ngModel" autocomplete="phoneNumber" class="form-control" placeholder="+54 9 11 XXXX-XXXX"
                           [class.is-invalid]="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)">

                        @if (phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)) {
                        <div class="invalid-feedback d-block">El número de teléfono es obligatorio.</div>
                        }  
                    </div>

                    <div class="d-grid mb-3">
                        <button type="submit" [disabled]="isLoading || registerForm.invalid" class="btn btn-success w-100 py-2 fw-bold shadow-sm">Registrarse
                        </button>
                    </div>

                    @if(isLoading){
                        <div class="d-flex justify-content-center my-3">
                            <app-spinner></app-spinner>
                        </div>
                    }

                    @if (errorRegister) {
                        <div class="alert alert-danger text-center py-2" role="alert">Error al registrar. Por favor, intente nuevamente.
                        </div>
                    } 

                    <div class="mt-3 text-center">
                        <span class="text-muted">¿Ya tenés cuenta?</span>
                        <a routerLink="/login" class="text-decoration-none fw-bold ms-1 text-success">Inicia sesión</a>
                    </div>
                </form>
        </div>
    </div>
</div>
